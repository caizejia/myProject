webpackJsonp([61],{Bbbl:function(t,e){},L3Mw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("mtWM"),a("zL8q");var i={mounted:function(){},data:function(){return{dialogImageUrl:"",dialogVisible:!1,multiple_flag:!1,up_flag:!0,loading:"",formLabelWidth:"120px",dynamicTags:[],check_data:{name:"",img:""},aRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{max:60,message:"超过名称最长字数限制60",trigger:"blur"}]},uploadParam:{file_field:"file",token:"",time:+new Date,format:"",file:null}}},methods:{submit:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;var i=e.$loading({lock:!0,text:"产品图片正在排重...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"}),s={};s.name=e.check_data.name,s.img=e.check_data.img,e.$axios.post("/v1/product/checks",s,{}).then(function(t){i.close(),e.$message({type:"success",message:t.data.msg,onClose:function(){a.$router.push("/product/check/index")}})}).catch(function(t){i.close(),e.$message.error(t.response.data.error)})})},beforeUpload:function(t){this.uploadParam.token=this.$md5("salt001"+this.uploadParam.time.toString());var e=t.type;this.uploadParam.format=e.slice(e.indexOf("/")+1),this.uploadParam.file=t},uploadSuccess:function(t,e,a){0==t.status?this.check_data.img="http://img.orkotech.com/"+t.path:this.$message.error(t.msg)},uploadFail:function(t,e,a){this.$message.error(t)},overLimit:function(t,e){this.$message.error("最多上传一张图片")},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},created:function(){var t=this.$route.query;this.check_data.name=t.name,this.check_data.img=""}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("div",{staticClass:"main-content-c"},[a("div",{staticStyle:{"margin-left":"15%",width:"60%"}},[a("el-steps",{attrs:{active:0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"1. 产品排重检查进行中"}}),t._v(" "),a("el-step",{attrs:{title:"2. 产品信息录入未开始"}}),t._v(" "),a("el-step",{attrs:{title:"3. 发布产品未开始"}})],1)],1),t._v(" "),a("p",{staticClass:"p-title"},[t._v("基础信息")]),t._v(" "),a("p",{staticClass:"p-content-main"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"name-right",attrs:{span:2}},[t._v("产品名称")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("el-form",{ref:"check_data",attrs:{model:t.check_data,rules:t.aRules}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容",size:"medium"},model:{value:t.check_data.name,callback:function(e){t.$set(t.check_data,"name",e)},expression:"check_data.name"}})],1)],1)],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("p",{staticClass:"p-title"},[t._v("产品图片")]),t._v(" "),a("p",{staticClass:"p-content-main"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-upload",{attrs:{action:"http://img.orkotech.com/fdfs_upload.php",limit:1,data:t.uploadParam,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,"on-error":t.uploadFail,"list-type":"picture-card","on-exceed":t.overLimit,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1)],1)]),t._v(" "),a("div",{staticStyle:{"border-top":"1px solid #ccc"}},[a("el-button",{staticClass:"btn-save",attrs:{plain:""},on:{click:function(e){t.submit("check_data")}}},[t._v("  提交  ")]),t._v(" "),a("el-button",{staticClass:"btn-cancel",attrs:{plain:""}},[t._v("  取消  ")])],1)])},staticRenderFns:[]};var l=a("VU/8")(i,s,!1,function(t){a("Bbbl")},"data-v-220ffc92",null);e.default=l.exports}});
//# sourceMappingURL=61.5e4f60779cb26569b75e.js.map