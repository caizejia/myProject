webpackJsonp([27],{Lte0:function(t,e){},dtKG:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("bOdI"),s=r.n(a),o=r("mtWM"),l=r.n(o),i={data:function(){var t,e;return{order_id:"",create_time:"",price:"",status:"",name:"",phone:"",country:"",province:"",city:"",area:"",address:"",post_code:"",remark:"",ip:"",orderGoods:[],orderLogs:[],trackLogs:[],dialogFormVisible:!1,form:{remark:"",type:[],track_number:"",status:[]},rules:{track_number:[{required:!0,message:"请输入物流单号",trigger:"blur"}],type:[{required:!0,message:"请选择问题类型",trigger:"change"}],status:[(t={required:!0},s()(t,"required",!0),s()(t,"message","请选择问题状态"),s()(t,"trigger","change"),t)],remark:[(e={required:!0},s()(e,"required",!0),s()(e,"message","请输入备注"),s()(e,"trigger","blur"),e)]},formLabelWidth:"120px"}},methods:{open:function(t){var e=this;this.$confirm("是否继续此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r=location.search;if(-1==r.indexOf("?"))return!1;var a=r.split("id=")[1].split("&")[0],s=e,o="";if("取消"==t.path[0].innerText)o=10;else if("签收"==t.path[0].innerText)o=9;else if("拒签"==t.path[0].innerText)o=13;else{if("确认"!=t.path[0].innerText)return"生成新订单"==t.path[0].innerText?(window.location.href="/order/newOrder"+r,!1):(s.$message({type:"info",message:"无法修改"}),!1);o=2}l()({method:"POST",url:"http://192.168.10.141/v1/order/update-status",data:{status:o,order_id:a}}).then(function(t){console.log(t),""!=t.data.error?s.$message({type:"info",message:t.data.error}):s.$message({type:"success",message:"成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消"})})},pSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var r=e;e.$axios.post("http://192.168.10.141/v1/order/update-status",{status:20,order_id:e.order_id,type:e.form.type,remark:e.form.remark,track_number:e.form.track_number,sonStatus:e.form.status}).then(function(t){console.log(t),e.dialogFormVisible=!1,""!=t.data.error?r.$message({type:"info",message:t.data.error}):r.$message({type:"success",message:"成功!"})}).catch(function(t){console.log(t)})})}},created:function(){var t=location.search,e=this;l()({method:"GET",url:"http://192.168.10.141/v1/order/details"+t}).then(function(t){console.log(t);var r=t.data.data;e.order_id=r.order.id,e.create_time=r.order.create_time,e.price=r.order.total_price,e.status=r.order.status,e.name=r.order.user_name,e.phone=r.order.phone,e.country=r.order.country,e.province=r.order.province,e.city=r.order.city,e.area=r.order.area,e.address=r.order.address,e.post_code=r.order.post_code,e.remark=r.order.remark,e.ip=r.order.user_ip,e.orderGoods=r.orderGoods,e.orderLogs=r.orderLogs,e.trackLogs=r.trackLogs})}},n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t._m(0),t._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"grid-content bg-purple-dark",attrs:{id:"order_id"}},[t._v("订单号："+t._s(t.order_id))])])],1),t._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("div",{staticClass:"grid-content bg-purple"},[t._v("下单时间："+t._s(t.create_time))])]),t._v(" "),r("el-col",{attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple"},[t._v("金额："+t._s(t.price))])]),t._v(" "),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[t._v("支付方式：COD")])]),t._v(" "),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"grid-content bg-purple"},[t._v("订单状态："+t._s(t.status))])])],1),t._v(" "),r("el-row",[r("el-button",{attrs:{type:"danger",round:""},on:{click:t.open}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",round:""},on:{click:t.open}},[t._v("生成新订单")]),t._v(" "),r("el-button",{attrs:{type:"success",round:""},on:{click:t.open}},[t._v("签收")]),t._v(" "),r("el-button",{attrs:{type:"info",round:""},on:{click:t.open}},[t._v("拒签")]),t._v(" "),r("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("设为待处理订单")]),t._v(" "),r("el-button",{attrs:{type:"success",round:""},on:{click:t.open}},[t._v("确认")])],1),t._v(" "),r("h2",[t._v("联系人信息")]),t._v(" "),r("table",{staticClass:"tb",staticStyle:{width:"100%"}},[r("tr",[r("th",[t._v("姓名")]),t._v(" "),r("td",[t._v(t._s(t.name))]),t._v(" "),r("th",[t._v("电话")]),t._v(" "),r("td",[t._v(t._s(t.phone))])]),t._v(" "),r("tr",[r("th",[t._v("国家/地区")]),t._v(" "),r("td",[t._v(t._s(t.country))]),t._v(" "),r("th",[t._v("省/市")]),t._v(" "),r("td",[t._v(t._s(t.province))])]),t._v(" "),r("tr",[r("th",[t._v("县")]),t._v(" "),r("td",[t._v(t._s(t.city))]),t._v(" "),r("th",[t._v("区")]),t._v(" "),r("td",[t._v(t._s(t.area))])]),t._v(" "),r("tr",[r("th",[t._v("地址")]),t._v(" "),r("td",[t._v(t._s(t.address))]),t._v(" "),r("th",[t._v("邮政编码")]),t._v(" "),r("td",[t._v(t._s(t.post_code))])]),t._v(" "),r("tr",[r("th",[t._v("备注")]),t._v(" "),r("td",[t._v(t._s(t.remark))]),t._v(" "),r("th",[t._v("ip")]),t._v(" "),r("td",[t._v(t._s(t.ip))])])]),t._v(" "),r("h2",[t._v("订单信息")]),t._v(" "),r("table",{staticClass:"tb",staticStyle:{width:"100%"}},[t._m(1),t._v(" "),t._l(t.orderGoods,function(e){return r("tr",[r("td",[t._v(t._s(e.sku_code))]),t._v(" "),r("td",[t._v(t._s(e.pname))]),t._v(" "),r("td",[t._v(t._s(e.number))]),t._v(" "),r("td",[t._v(t._s(e.price))])])})],2),t._v(" "),r("h2",[t._v("发货信息")]),t._v(" "),r("table",{staticClass:"tb",staticStyle:{width:"100%"}},[t._m(2),t._v(" "),t._l(t.trackLogs,function(e){return r("tr",[r("td",[t._v(t._s(e.freight_forwarder))]),t._v(" "),r("td",[t._v(t._s(e.landing_company))]),t._v(" "),r("td",[t._v(t._s(e.number))]),t._v(" "),r("td",[t._v(t._s(e.track_time))]),t._v(" "),r("td",[t._v(t._s(e.track_status))])])})],2),t._v(" "),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("h2",[t._v("操作日志")])]),t._v(" "),t._l(t.orderLogs,function(e){return r("div",{staticClass:"text item"},[t._v("\n      操作人："+t._s(e.action_user)+"    时间："+t._s(e.log_time)),r("br"),t._v("\n      修改订单状态："+t._s(e.old_status+" =》"+e.new_status)),r("br"),t._v("\n      备注："+t._s(e.remark)),r("br"),r("br")])})],2),t._v(" "),r("el-dialog",{attrs:{title:"标注问题单",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[r("el-form-item",{attrs:{label:"物流单号","label-width":t.formLabelWidth,prop:"track_number"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:t.form.track_number,callback:function(e){t.$set(t.form,"track_number",e)},expression:"form.track_number"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"问题类型","label-width":t.formLabelWidth,prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[r("el-option",{attrs:{label:"其他",value:"0"}}),t._v(" "),r("el-option",{attrs:{label:"地址有误",value:"1"}}),t._v(" "),r("el-option",{attrs:{label:"电话有误",value:"2"}}),t._v(" "),r("el-option",{attrs:{label:"电话无人接听",value:"3"}}),t._v(" "),r("el-option",{attrs:{label:"签收失败",value:"4"}}),t._v(" "),r("el-option",{attrs:{label:"无人收货",value:"5"}}),t._v(" "),r("el-option",{attrs:{label:"客户无法现金支付",value:"6"}}),t._v(" "),r("el-option",{attrs:{label:"客户要求取消订单",value:"7"}}),t._v(" "),r("el-option",{attrs:{label:"客户希望换一天送货",value:"8"}}),t._v(" "),r("el-option",{attrs:{label:"客户拒绝付款",value:"9"}}),t._v(" "),r("el-option",{attrs:{label:"电话地址都有误",value:"10"}}),t._v(" "),r("el-option",{attrs:{label:"客户说未曾订购",value:"11"}}),t._v(" "),r("el-option",{attrs:{label:"颜色不详",value:"12"}}),t._v(" "),r("el-option",{attrs:{label:"尺寸不详",value:"13"}}),t._v(" "),r("el-option",{attrs:{label:"件数不详",value:"14"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"问题状态","label-width":t.formLabelWidth,prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[r("el-option",{attrs:{label:"处理中",value:"0"}}),t._v(" "),r("el-option",{attrs:{label:"重新派送",value:"1"}}),t._v(" "),r("el-option",{attrs:{label:"取消订单",value:"2"}}),t._v(" "),r("el-option",{attrs:{label:"拒签",value:"3"}}),t._v(" "),r("el-option",{attrs:{label:"签收",value:"4"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth,prop:"remark"}},[r("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.pSubmit("form")}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-head-title"},[e("span",{staticClass:"p-span"},[e("span",[this._v("首页 ")]),this._v("  /  \n        "),e("span",[this._v("订单 ")]),this._v("  /  \n        "),e("span",{staticClass:"p-span-active"},[this._v("订单详情")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("sku")]),this._v(" "),e("th",[this._v("标题")]),this._v(" "),e("th",[this._v("数量")]),this._v(" "),e("th",[this._v("单价")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th",[t._v("货代")]),t._v(" "),r("th",[t._v("落地配公司")]),t._v(" "),r("th",[t._v("物流单号")]),t._v(" "),r("th",[t._v("发货时间")]),t._v(" "),r("th",[t._v("物流状态")])])}]};var _=r("VU/8")(i,n,!1,function(t){r("Lte0")},null,null);e.default=_.exports}});
//# sourceMappingURL=27.49bd4a975589be8f675d.js.map