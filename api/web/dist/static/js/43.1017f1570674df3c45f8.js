webpackJsonp([43],{"6UXU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("bOdI"),r=a.n(l),o={data:function(){var e,t;return{options:[{value:"1",label:"待确认订单",children:[{label:"马来西亚",value:"MY"},{label:"新加坡",value:"SG"},{label:"泰国",value:"TH"},{label:"印尼",value:"ID"},{label:"台湾",value:"TW"},{label:"香港",value:"HK"},{label:"阿联酋",value:"UA"}]},{value:"20",label:"待处理订单",children:[{label:"马来西亚",value:"MY"},{label:"新加坡",value:"SG"},{label:"泰国",value:"TH"},{label:"印尼",value:"ID"},{label:"台湾",value:"TW"},{label:"香港",value:"HK"},{label:"阿联酋",value:"UA"}]}],dialogFormVisible:!1,form:{remark:"",type:[],track_number:"",status:[]},rules:{track_number:[{required:!0,message:"请输入物流单号",trigger:"blur"}],type:[{required:!0,message:"请选择问题类型",trigger:"change"}],status:[(e={required:!0},r()(e,"required",!0),r()(e,"message","请选择问题状态"),r()(e,"trigger","change"),e)],remark:[(t={required:!0},r()(t,"required",!0),r()(t,"message","请输入备注"),r()(t,"trigger","blur"),t)]},formLabelWidth:"120px",value1:["",""],tableData:[],totalSize:0,currentPage:1,pageSize:10,currentRow:null}},methods:{setProblemOrder:function(e){this.dialogFormVisible=!0,this.currentRow=e},handleSizeChange:function(e){this.pageSize=e,console.log(e),this.initTable(this.value1[0],this.value1[1])},handleCurrentChange:function(e){this.currentPage=e,console.log(e),this.initTable(this.value1[0],this.value1[1])},assignCompleter:function(e){e[0]&&"undifind"!=e[0]||(e[0]=""),e[1]&&"undifind"!=e[1]||(e[1]=""),this.value1=e,this.initTable(e[0],e[1])},openDetail:function(e){this.$router.push("/order/orderDetail?id="+e)},handleClk:function(e,t){var a=this;if("update"==t){var l={id:e};this.$router.push({path:"/order/updateOrder",query:l})}else this.$confirm("是否继续此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var l=a;a.$axios.post("/v1/order/update-status",{status:t,order_id:e}).then(function(e){console.log(e),a.dialogFormVisible=!1,""!=e.data.error?l.$message({type:"info",message:e.data.error}):l.$message({type:"success",message:"成功!"})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},pSubmit:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l=a;a.$axios.post("/v1/order/update-status",{status:20,order_id:t,type:a.form.type,remark:a.form.remark,track_number:a.form.track_number,sonStatus:a.form.status}).then(function(e){console.log(e),a.dialogFormVisible=!1,""!=e.data.error?l.$message({type:"info",message:e.data.error}):l.$message({type:"success",message:"成功!"})}).catch(function(e){console.log(e)})})},initTable:function(e,t){var a="/v1/order/audit-order?page="+this.currentPage+"&pageSize="+this.pageSize+"&status="+e+"&country="+t,l=this,r=[];this.$axios.get(a).then(function(e){if(200==e.data.code){console.log(e.data.data);var t=e.data.data.list;l.totalSize=parseInt(e.data.data.totalSize),t.forEach(function(e){var t={};t.order_id=e.id,t.price=e.total_price,t.website=e.website,t.country=e.country,t.name=e.user_name,t.phone=e.phone,t.ip=e.user_ip,t.comment=e.comment,t.create_time=e.create_time,t.status=e.status,r.push(t)}),l.tableData=r}else l.$message({type:"error",message:"搜索失败!"})}).catch(function(e){l.$message({type:"error",message:"网络不好，请重试!"})})}},created:function(){this.initTable("","")}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("订单")]),e._v(" "),a("el-breadcrumb-item",[e._v("订单审核")]),e._v(" "),a("el-breadcrumb-item",[e._v("订单审核")])],1),e._v(" "),a("div",{staticClass:"rowContainer"},[a("el-cascader",{attrs:{placeholder:"试试搜索：马来待确认",options:e.options,value:e.value1,filterable:"","change-on-select":"",clearable:""},on:{change:e.assignCompleter}})],1),e._v(" "),a("div",{staticClass:"tableContainer"},[a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%",border:""}},[a("el-table-column",{attrs:{prop:"order_id",label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.openDetail(t.row.order_id)}}},[e._v(e._s(t.row.order_id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"website",label:"站点"}}),e._v(" "),a("el-table-column",{attrs:{prop:"country",label:"地区"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"下单人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"客户备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"下单时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"200",prop:"status",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.handleClk(t.row.order_id,2)}}},[e._v("确认订单")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleClk(t.row.order_id,10)}}},[e._v("取消订单")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleClk(t.row.order_id,"update")}}},[e._v("修改订单")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.setProblemOrder(t.row)}}},[e._v("设为待处理订单")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"标注问题单",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"物流单号","label-width":e.formLabelWidth,prop:"track_number"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.form.track_number,callback:function(t){e.$set(e.form,"track_number",t)},expression:"form.track_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"问题类型","label-width":e.formLabelWidth,prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"其他",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"地址有误",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"电话有误",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"电话无人接听",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"签收失败",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"无人收货",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"客户无法现金支付",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"客户要求取消订单",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"客户希望换一天送货",value:"8"}}),e._v(" "),a("el-option",{attrs:{label:"客户拒绝付款",value:"9"}}),e._v(" "),a("el-option",{attrs:{label:"电话地址都有误",value:"10"}}),e._v(" "),a("el-option",{attrs:{label:"客户说未曾订购",value:"11"}}),e._v(" "),a("el-option",{attrs:{label:"颜色不详",value:"12"}}),e._v(" "),a("el-option",{attrs:{label:"尺寸不详",value:"13"}}),e._v(" "),a("el-option",{attrs:{label:"件数不详",value:"14"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"问题状态","label-width":e.formLabelWidth,prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"处理中",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"重新派送",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"取消订单",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"拒签",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"签收",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.pSubmit("form",e.currentRow.order_id)}}},[e._v("提 交")])],1)],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,i,!1,function(e){a("I3KT")},"data-v-57bd1dad",null);t.default=s.exports},I3KT:function(e,t){}});
//# sourceMappingURL=43.1017f1570674df3c45f8.js.map